(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-623a184b"],{1148:function(e,t,n){"use strict";var r=n("a691"),s=n("1d80");e.exports=function(e){var t=String(s(this)),n="",a=r(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},"1a2d":function(e,t,n){"use strict";n("82bf")},"1dde":function(e,t,n){var r=n("d039"),s=n("b622"),a=n("2d00"),i=s("species");e.exports=function(e){return a>=51||!r((function(){var t=[],n=t.constructor={};return n[i]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2501:function(e,t,n){"use strict";n("be60")},"408a":function(e,t,n){var r=n("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},"4aab":function(e,t,n){},"82bf":function(e,t,n){},8418:function(e,t,n){"use strict";var r=n("c04e"),s=n("9bf2"),a=n("5c6c");e.exports=function(e,t,n){var i=r(t);i in e?s.f(e,i,a(0,n)):e[i]=n}},"99af":function(e,t,n){"use strict";var r=n("23e7"),s=n("d039"),a=n("e8b5"),i=n("861d"),c=n("7b0b"),o=n("50c4"),l=n("8418"),d=n("65f0"),u=n("1dde"),m=n("b622"),b=n("2d00"),v=m("isConcatSpreadable"),p=9007199254740991,h="Maximum allowed index exceeded",f=b>=51||!s((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),w=u("concat"),A=function(e){if(!i(e))return!1;var t=e[v];return void 0!==t?!!t:a(e)},k=!f||!w;r({target:"Array",proto:!0,forced:k},{concat:function(e){var t,n,r,s,a,i=c(this),u=d(i,0),m=0;for(t=-1,r=arguments.length;t<r;t++)if(a=-1===t?i:arguments[t],A(a)){if(s=o(a.length),m+s>p)throw TypeError(h);for(n=0;n<s;n++,m++)n in a&&l(u,m,a[n])}else{if(m>=p)throw TypeError(h);l(u,m++,a)}return u.length=m,u}})},b0c0:function(e,t,n){var r=n("83ab"),s=n("9bf2").f,a=Function.prototype,i=a.toString,c=/^\s*function ([^ (]*)/,o="name";r&&!(o in a)&&s(a,o,{configurable:!0,get:function(){try{return i.call(this).match(c)[1]}catch(e){return""}}})},b466:function(e,t,n){"use strict";n("4aab")},b680:function(e,t,n){"use strict";var r=n("23e7"),s=n("a691"),a=n("408a"),i=n("1148"),c=n("d039"),o=1..toFixed,l=Math.floor,d=function(e,t,n){return 0===t?n:t%2===1?d(e,t-1,n*e):d(e*e,t/2,n)},u=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},m=function(e,t,n){var r=-1,s=n;while(++r<6)s+=t*e[r],e[r]=s%1e7,s=l(s/1e7)},b=function(e,t){var n=6,r=0;while(--n>=0)r+=e[n],e[n]=l(r/t),r=r%t*1e7},v=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+i.call("0",7-r.length)+r}return n},p=o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!c((function(){o.call({})}));r({target:"Number",proto:!0,forced:p},{toFixed:function(e){var t,n,r,c,o=a(this),l=s(e),p=[0,0,0,0,0,0],h="",f="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(h="-",o=-o),o>1e-21)if(t=u(o*d(2,69,1))-69,n=t<0?o*d(2,-t,1):o/d(2,t,1),n*=4503599627370496,t=52-t,t>0){m(p,0,n),r=l;while(r>=7)m(p,1e7,0),r-=7;m(p,d(10,r,1),0),r=t-1;while(r>=23)b(p,1<<23),r-=23;b(p,1<<r),m(p,1,1),b(p,2),f=v(p)}else m(p,0,n),m(p,1<<-t,0),f=v(p)+i.call("0",l);return l>0?(c=f.length,f=h+(c<=l?"0."+i.call("0",l-c)+f:f.slice(0,c-l)+"."+f.slice(c-l))):f=h+f,f}})},b733:function(e,t,n){"use strict";n("dc85")},be60:function(e,t,n){},cbc2:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pageContainer"},[n("b-card",{staticClass:"cardContainer",attrs:{"bg-variant":"dark","text-variant":"white"}},[n("b-overlay",{attrs:{show:e.show,rounded:"sm"}},[n("div",[n("b-card-title",{staticClass:"m-2",staticStyle:{float:"left"}},[e._v(e._s(e.service))]),e.connected?e._e():n("b-button",{staticClass:"m-2",staticStyle:{float:"right"},attrs:{variant:"warning"},on:{click:function(t){return e.onClickConnectBtn()}}},[e._v("Wallet Connect")]),e.connected?n("b-button",{staticClass:"m-2",staticStyle:{float:"right"},attrs:{variant:"info"}},[e._v("Wallet Connected")]):e._e()],1),n("div",{staticStyle:{clear:"both"}}),"Deposit"===e.service||"Withdrawal"===e.service?n("deposit-withdrawal",{attrs:{service:e.service,connected:e.connected,"sender-account":e.senderAccount}}):e._e(),"Token"===e.service?n("tokenRegister",{attrs:{"sender-account":e.senderAccount}}):e._e(),"Flash C2B Payment"===e.service?n("c2bPayment",{attrs:{"sender-account":e.senderAccount}}):e._e(),"Admin"===e.service?n("admin",{attrs:{"sender-account":e.senderAccount}}):e._e(),"Merchant"===e.service?n("merchant",{attrs:{"sender-account":e.senderAccount}}):e._e(),"Referral Commission System"===e.service?n("referral-commission",{attrs:{"sender-account":e.senderAccount}}):e._e(),"Subscription Service"===e.service?n("subscriptionService",{attrs:{"sender-account":e.senderAccount}}):e._e()],1),n("alert",{attrs:{"show-network-connection-error-alert":e.showNetworkConectionErrorAlert}})],1)],1)},s=[],a=n("1da1"),i=(n("96cf"),n("a078")),c=n("90a4"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mx-3 mt-4"},[n("b-alert",{staticClass:"my-4",attrs:{variant:"danger",dismissible:""},model:{value:e.showNetworkConnectionErrorAlert,callback:function(t){e.showNetworkConnectionErrorAlert=t},expression:"showNetworkConnectionErrorAlert"}},[e._v(" Please switch to Mumbai-Testnet network for crypto deposit. ")]),n("b-alert",{staticClass:"my-4",attrs:{variant:"danger",dismissible:""},model:{value:e.showInvalidTokenAmountAlert,callback:function(t){e.showInvalidTokenAmountAlert=t},expression:"showInvalidTokenAmountAlert"}},[e._v(" Invalid token amount input! ")]),n("b-alert",{staticClass:"my-4",attrs:{variant:"danger",dismissible:""},model:{value:e.showMissTokenTypeAlert,callback:function(t){e.showMissTokenTypeAlert=t},expression:"showMissTokenTypeAlert"}},[e._v(" Please input your deposit token type! ")]),n("b-alert",{staticClass:"my-4",attrs:{variant:"danger",dismissible:""},model:{value:e.showInvalidAddressAlert,callback:function(t){e.showInvalidAddressAlert=t},expression:"showInvalidAddressAlert"}},[e._v(" Invalid address input! ")]),n("b-alert",{staticClass:"my-1",attrs:{variant:"success",dismissible:""},model:{value:e.showSuccessAlert,callback:function(t){e.showSuccessAlert=t},expression:"showSuccessAlert"}},[e._v(" "+e._s(e.successAlertMsg)+" ")]),n("b-alert",{staticClass:"my-1",attrs:{variant:"danger",dismissible:""},model:{value:e.showFailAlert,callback:function(t){e.showFailAlert=t},expression:"showFailAlert"}},[e._v(" "+e._s(e.failAlertMsg)+" ")])],1)},l=[],d={name:"alert",props:{showNetworkConnectionErrorAlert:Boolean},data:function(){return{showInvalidTokenAmountAlert:!1,showMissTokenTypeAlert:!1,showInvalidAddressAlert:!1,showSuccessAlert:!1,showFailAlert:!1,successAlertMsg:"",failAlertMsg:""}},mounted:function(){var e=this;this.$root.$on("invalidTokenAmountAlert",(function(t){console.log("event receive: invalidTokenAmountAlert",t),e.showInvalidTokenAmountAlert=t})),this.$root.$on("missTokenTypeAlert",(function(t){e.showMissTokenTypeAlert=t})),this.$root.$on("invalidAddressAlert",(function(t){e.showInvalidAddressAlert=t})),this.$root.$on("successAlert",(function(t,n){e.showSuccessAlert=t,e.successAlertMsg=n})),this.$root.$on("failAlert",(function(t,n){e.showFailAlert=t,e.failAlertMsg=n}))}},u=d,m=n("2877"),b=Object(m["a"])(u,o,l,!1,null,"614fcf96",null),v=b.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-container",{attrs:{fluid:""}},[n("accountRow",{attrs:{"sender-account":e.senderAccount,"token-name":e.tokenName}}),n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[n("label",{attrs:{for:"tokenName"}},[e._v("Token:")])]),n("b-col",{attrs:{md:"7"}},["Deposit"==e.service?n("b-form-select",{attrs:{id:"tokenName",options:e.depositOptions,size:"sm"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}):e._e(),"Withdrawal"==e.service?n("b-form-select",{attrs:{id:"tokenName",options:e.withdrawOptions,size:"sm"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}):e._e()],1)],1),n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[n("label",{attrs:{for:"amount"}},[e._v(e._s(e.service)+" Amount:")])]),n("b-col",{attrs:{md:"7"}},[n("b-form-input",{attrs:{id:"amount",placeholder:"amount",type:"number",size:"sm"},model:{value:e.tokenAmount,callback:function(t){e.tokenAmount=t},expression:"tokenAmount"}})],1)],1),n("b-row",{staticClass:"mx-2"},[n("b-col",{attrs:{md:"10"}},[n("div",["Deposit"===e.service?n("b-card-text",{staticClass:"noticeBox"},[e._v(" All USDT deposits are locked in the smart contract. "),n("br"),e._v(" CPHT would instantly be minted to the depositor accounts when the deposit fund are confirmed. "),n("br"),e._v(" Transactors could withdraw USDT by swaping CPHT and USDT on the withdrawal page. ")]):e._e(),"Withdrawal"===e.service?n("b-card-text",{staticClass:"noticeBox"},[e._v(" In the swapping process, CPHT will be stored and locked in the pool. "),n("br"),e._v(" USDT from the pool will be transferred to user account. ")]):e._e(),"Deposit"==e.service?n("div",[n("a",{staticClass:"card-link",attrs:{href:"#"}},[e._v("Buy Token")]),n("b-link",{staticClass:"card-link",attrs:{href:"#"}},[e._v("Transaction Status")])],1):e._e()],1)]),n("b-col",{attrs:{md:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",disabled:!e.connected,variant:e.connected?"success":""},on:{click:function(t){return e.confirmHandle()}}},[e._v("Confirm ")])],1)],1)],1),n("tokenSwapModal",{attrs:{account:e.senderAccount,contractAddress:e.selected,service:e.service,"token-amount":e.tokenAmount}})],1)},h=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{attrs:{id:"modal-scoped",size:"lg",title:e.service,"hide-footer":"",centered:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.cancel;return[n("b-progress",{attrs:{value:e.progress,variant:"success"}}),0==e.current_step?n("b-card",{staticClass:"card-style",attrs:{title:"STEP1: Token Approval"}},[n("b-card-text",[e._v("Token Amount: "+e._s(e.tokenAmount))]),n("b-card-text",[e._v("Contract Address: "+e._s(e.contractAddress))]),n("b-card-text",[e._v("Token Spender: "+e._s(e.tokenSpender)+" "),n("br"),e._v(" [Swap Contract for token swap]")]),n("div",{staticStyle:{float:"right"}},["Deposit"==e.service?n("b-button",{attrs:{variant:"primary"},on:{click:e.USDTapproveHandle}},[1==e.approveSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Approve ")],1):e._e(),"Withdrawal"==e.service?n("b-button",{attrs:{variant:"primary"},on:{click:e.CPHTapproveHandle}},[1==e.approveSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Approve ")],1):e._e()],1)],1):e._e(),1==e.current_step?n("b-card",{staticClass:"card-style",attrs:{title:"STEP2: Token Swap"}},[n("b-card-text",[e._v("Token Amount: "+e._s(e.tokenAmount))]),n("b-card-text",[e._v("Contract Address: "+e._s(e.contractAddress))]),n("div",{staticStyle:{float:"right"}},["Deposit"==e.service?n("b-button",{attrs:{variant:"primary"},on:{click:e.USDTCPHTSwapHandle}},[1==e.swapSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Swap ")],1):e._e(),"Withdrawal"==e.service?n("b-button",{attrs:{variant:"primary"},on:{click:e.CPHTUSDTSwapHandle}},[1==e.swapSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Swap ")],1):e._e()],1)],1):e._e(),2==e.current_step?n("b-card",{staticClass:"card-style",attrs:{title:"Deposit Success"}},[n("div",{staticStyle:{float:"right"}},[n("b-button",{staticClass:"flex-column",attrs:{variant:"primary"},on:{click:function(t){r(),e.depositCompleteHandle()}}},[e._v("Close ")])],1)]):e._e()]}}])})},w=[],A={name:"tokenSwapModal",props:{account:String,service:String,tokenAmount:String,contractAddress:String},data:function(){return{current_step:0,max_step:2,allowed:!1,transferred:!1,tokenSpender:i["a"].contract.swap,approveSpinner:!1,swapSpinner:!1}},computed:{progress:function(){return Math.round(100/this.max_step)*this.current_step}},methods:{onClickNext:function(){this.current_step++},depositCompleteHandle:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].sleep(100);case 2:this.current_step=0,this.allowed=!1,this.transferred=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),USDTapproveHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].approve(e.account,i["a"].contract.USDT,i["a"].contract.CPHT,parseInt(e.tokenAmount)*Math.pow(10,6));case 2:if(n=t.sent,console.log("result: ",n),null==n){t.next=11;break}return e.approveSpinner=!0,t.next=8,c["a"].waitForTxToBeMined(n);case 8:r=t.sent,e.approveSpinner=!1,1==r?e.onClickNext():alert("Check your USDT allowance is currently 0 and the gas for execution is enough!");case 11:case"end":return t.stop()}}),t)})))()},USDTCPHTSwapHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].USDTCPHTSwap(e.account,parseInt(e.tokenAmount)*Math.pow(10,6));case 2:if(n=t.sent,null==n){t.next=10;break}return e.swapSpinner=!0,t.next=7,c["a"].waitForTxToBeMined(n);case 7:r=t.sent,e.swapSpinner=!1,!0===r?(e.$root.$emit("updateBalance"),e.onClickNext()):alert("Check your USDT allowance is currently 0 and the gas for execution is enough!");case 10:case"end":return t.stop()}}),t)})))()},CPHTapproveHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].approve(e.account,i["a"].contract.CPHT,i["a"].contract.CPHT,parseInt(e.tokenAmount)*Math.pow(10,6));case 2:if(n=t.sent,console.log("result: ",n),null==n){t.next=11;break}return e.approveSpinner=!0,t.next=8,c["a"].waitForTxToBeMined(n);case 8:r=t.sent,e.approveSpinner=!1,!0===r?e.onClickNext():alert("Check your USDT allowance is currently 0 and the gas for execution is enough!");case 11:case"end":return t.stop()}}),t)})))()},CPHTUSDTSwapHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].CPHTUSDTSwap(e.account,parseInt(e.tokenAmount)*Math.pow(10,6));case 2:if(n=t.sent,null==n){t.next=10;break}return e.swapSpinner=!0,t.next=7,c["a"].waitForTxToBeMined(n);case 7:r=t.sent,e.swapSpinner=!1,!0===r?(e.$root.$emit("updateBalance"),e.onClickNext()):alert("Check your USDT allowance is currently 0 and the gas for execution is enough!");case 10:case"end":return t.stop()}}),t)})))()}}},k=A,x=Object(m["a"])(k,f,w,!1,null,"21e06288",null),S=x.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Account:")]),n("b-col",{attrs:{md:"7"}},[e._v(e._s(""===e.senderAccount?"-":e.senderAccount))])],1),null!=e.tokenName?n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Balance: ("+e._s(""===e.tokenName?"----":e.tokenName)+")")]),n("b-col",{attrs:{md:"7"}},[e._v(e._s(""===e.tokenBalance?"-":e.tokenBalance))])],1):e._e()],1)},C=[],_=(n("b680"),{name:"accountRow",props:{senderAccount:String,tokenName:String},watch:{tokenName:function(e){console.log("token Name change:",e),""!==e&&""!==this.senderAccount&&(this.tokenAddressInit(),this.tokenUserBalance())},senderAccount:function(e){console.log("new sender Account",e),"undefined"!==typeof this.tokenName&&""!==this.tokenName&&""!==e?(this.tokenAddressInit(),this.tokenUserBalance()):this.tokenBalance=""}},data:function(){return{tokenAddress:"",tokenBalance:""}},mounted:function(){var e=this;this.tokenAddressInit(),this.$root.$on("updateBalance",(function(){console.log("updateBalance event triggered: ",e.tokenAddress),e.tokenUserBalance(e.tokenAddress)}))},methods:{tokenAddressInit:function(){"USDT"===this.tokenName?this.tokenAddress=i["a"].contract.USDT:"CPHT"===this.tokenName&&(this.tokenAddress=i["a"].contract.CPHT)},tokenUserBalance:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.tokenAddress){t.next=3;break}return console.error("token address not yet initialized"),t.abrupt("return");case 3:"undefined"!==typeof e.senderAccount||""!==e.senderAccount?(console.log("token address",e.tokenAddress,"sender account",e.senderAccount),c["a"].getTokenBalance(e.tokenAddress,e.senderAccount).then((function(t){e.tokenBalance=(t/Math.pow(10,6)).toFixed(2)})).catch((function(e){console.error(e)}))):e.tokenBalance="";case 4:case"end":return t.stop()}}),t)})))()}}}),T=_,y=Object(m["a"])(T,g,C,!1,null,"052e0a39",null),R=y.exports,I={name:"depositWithdrawal",components:{tokenSwapModal:S,accountRow:R},props:{service:String,connected:Boolean,senderAccount:String},watch:{selected:function(){this.selected===i["a"].contract.USDT?this.tokenName="USDT":this.selected===i["a"].contract.CPHT&&(this.tokenName="CPHT")}},data:function(){return{tokenName:"",selected:null,depositOptions:[{value:null,text:"Please select an option"},{value:i["a"].contract.USDT,text:"USDT"}],withdrawOptions:[{value:null,text:"Please select an option"},{value:i["a"].contract.CPHT,text:"CPHT"}],tokenAmount:null}},methods:{confirmHandle:function(){if(!(parseInt(this.tokenAmount)>0))return console.log("Here",this.selected),void this.$root.$emit("invalidTokenAmountAlert",!0);this.$root.$emit("invalidTokenAmountAlert",!1),null!=this.selected?(this.$root.$emit("missTokenTypeAlert",!1),this.$bvModal.show("modal-scoped")):this.$root.$emit("missTokenTypeAlert",!0)}}},P=I,$=Object(m["a"])(P,p,h,!1,null,"396f09a2",null),F=$.exports,H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-container",{attrs:{fluid:""}},[n("accountRow",{attrs:{"sender-account":e.senderAccount}}),n("b-table",{staticClass:"py-3 mx-2",attrs:{small:"",fields:e.fields,items:e.items,responsive:"sm",dark:""}}),n("b-row",{staticClass:"my-4",attrs:{"align-h":"end"}},[n("b-col",{attrs:{md:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",disabled:""===e.senderAccount,variant:""===e.senderAccount?"":"success"},on:{click:e.tokenRegister}},[e._v(" Register ")])],1)],1)],1)],1)},M=[],B={registerCPHT:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].tokenRegistry(i["a"].token.CPHT);case 2:case"end":return e.stop()}}),e)})))()},registerUSDT:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].tokenRegistry(i["a"].token.USDT);case 2:case"end":return e.stop()}}),e)})))()}},W={name:"tokenRegister",components:{accountRow:R},props:{senderAccount:String},data:function(){return{fields:["TokenName","Network","Address"],items:[{TokenName:i["a"].tokenName.USDT,Network:i["a"].networkName,Address:i["a"].contract.USDT},{TokenName:i["a"].tokenName.CPHT,Network:i["a"].networkName,Address:i["a"].contract.CPHT}]}},methods:{tokenRegister:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["a"].blockchainConnection();case 2:B.registerUSDT().then((function(e){console.log(e),B.registerCPHT()}));case 3:case"end":return e.stop()}}),e)})))()}}},O=W,j=Object(m["a"])(O,H,M,!1,null,null,null),D=j.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("b-container",{attrs:{fluid:""}},[n("accountRow",{attrs:{senderAccount:e.senderAccount,"token-name":"CPHT"}}),n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Target:")]),n("b-col",{attrs:{md:"7"}},[n("b-form-input",{attrs:{placeholder:"0x (Address)",size:"sm"},model:{value:e.targetAddress,callback:function(t){e.targetAddress=t},expression:"targetAddress"}})],1)],1),n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Amount:")]),n("b-col",{attrs:{md:"7"}},[n("b-form-input",{attrs:{placeholder:"0",type:"number",size:"sm"},model:{value:e.amount,callback:function(t){e.amount=t},expression:"amount"}})],1)],1),n("b-row",{staticClass:"my-4",attrs:{"align-h":"end"}},[n("b-col",{attrs:{md:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",disabled:""==e.senderAccount,variant:""==e.senderAccount?"":"success"},on:{click:function(t){return e.submitHandle()}}},[1==e.sendSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Transfer ")],1)],1)],1)],1)],1)},U=[],L=(n("99af"),{name:"c2bPayment",components:{accountRow:R},props:{senderAccount:String},data:function(){return{connected:!1,targetAddress:"",amount:null,sendSpinner:!1}},methods:{submitHandle:function(){parseInt(this.amount)>0?(this.$root.$emit("invalidTokenAmountAlert",!1),c["a"].checkIsAddress(this.targetAddress)?(this.$root.$emit("invalidAddressAlert",!1),this.submit()):this.$root.$emit("invalidAddressAlert",!0)):this.$root.$emit("invalidTokenAmountAlert",!0)},submit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].transfer(e.senderAccount,i["a"].contract.CPHT,e.targetAddress,parseInt(e.amount));case 2:if(n=t.sent,console.log(n,"txHash value"),null==n){t.next=11;break}return e.sendSpinner=!0,t.next=8,c["a"].waitForTxToBeMined(n);case 8:r=t.sent,e.sendSpinner=!1,!0===r?(e.$root.$emit("updateBalance"),e.$root.$emit("successAlert",!0,"Success to transfer ".concat(e.amount," CPHT to ").concat(e.targetAddress))):e.$root.$emit("failAlert",!0,"Check your CPHT balance and gas for execution is enough! \n Also, please confirm whether the target address has registered as a merchant");case 11:case"end":return t.stop()}}),t)})))()}}}),E=L,z=Object(m["a"])(E,N,U,!1,null,"067f779a",null),V=z.exports,q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("b-container",{attrs:{fluid:""}},[n("b-row",{staticClass:"my-4 ml-1"},[n("b-col",{attrs:{md:"3"}},[e._v(" Contract Owner: "),n("div",{class:e.isAdmin?"text-success":"text-danger"},[e._v(" ["+e._s(e.matchingMessage)+"] ")])]),n("b-col",{attrs:{md:"7"}},[e._v(" "+e._s(e.adminAddress)+" "),n("br")])],1),n("accountRow",{attrs:{senderAccount:e.senderAccount}}),n("div",[n("merchant-add-drop",{staticClass:"my-4",attrs:{"sender-account":e.senderAccount,"is-admin":e.isAdmin}}),n("b-card",{staticClass:"my-4 text-center",staticStyle:{"background-color":"rgba(73, 80, 87, 0.5)"},attrs:{header:"Service Fee"}},[n("b-tabs",{attrs:{pills:"",card:"",vertical:"",end:"",small:""}},[n("b-tab",{attrs:{title:"Set Fee",active:""}},[n("transactionFeeSetting",{attrs:{"sender-account":e.senderAccount,"is-admin":e.isAdmin}})],1),n("b-tab",{attrs:{title:"To Whitelist"}},[n("whitelistAdd",{attrs:{"sender-account":e.senderAccount,"is-admin":e.isAdmin}})],1),n("b-tab",{attrs:{title:"Out Whitelist"}},[n("whitelistRemove",{attrs:{"sender-account":e.senderAccount,"is-admin":e.isAdmin}})],1)],1)],1)],1)],1)],1)},J=[],Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-left"},[n("b-card-text",[n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{cols:"12",md:"4"}},[e._v("Transaction Rate:")]),n("b-col",{attrs:{cols:"6",md:"8"}},[e._v(e._s(e.transactionFee))])],1),n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4"}},[e._v("New Rate:")]),n("b-col",{attrs:{md:"8"}},[n("b-form-input",{attrs:{id:"amount",placeholder:"1.00",type:"number",size:"sm"},model:{value:e.newTransactionFee,callback:function(t){e.newTransactionFee=t},expression:"newTransactionFee"}})],1)],1)],1),n("b-row",{attrs:{"align-h":"end"}},[n("b-col",{attrs:{cols:"12",md:"4",lg:"3","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",size:"sm",disabled:!1===e.isAdmin,variant:!1===e.isAdmin?"":"success"},on:{click:function(t){return e.submitHandle()}}},[!0===e.loadSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Set ")],1)],1)],1)],1)},G=[],K={name:"transactionFeeSetting",props:{senderAccount:String,isAdmin:Boolean},data:function(){return{loadSpinner:!1,transactionFee:null,newTransactionFee:null}},mounted:function(){var e=this;c["a"].checkPaymentFee().then((function(t){e.transactionFee=parseFloat(t)/10+" %"})).catch((function(e){alert("Error occur!"),console.error(e)}))},methods:{submitHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(parseFloat(e.newTransactionFee)>=0)){t.next=18;break}if(n=parseInt(100*parseFloat(e.newTransactionFee)/10),n!==e.transactionFee){t.next=5;break}return alert("Updated transaction fee same as current value!"),t.abrupt("return");case 5:return e.loadSpinner=!0,t.next=8,c["a"].updateTransactionFee(n,e.senderAccount);case 8:if(r=t.sent,null==r){t.next=14;break}return t.next=12,c["a"].waitForTxToBeMined(r);case 12:s=t.sent,!0===s&&window.alert("Set transaction fee success!");case 14:e.loadSpinner=!1,e.transactionFee=n/10+" %",t.next=19;break;case 18:alert("Transaction Fee should not be smaller than 0!");case 19:case"end":return t.stop()}}),t)})))()}}},X=K,Y=Object(m["a"])(X,Q,G,!1,null,"7af02d12",null),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-left"},[n("b-card-text",[n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Address:")]),n("b-col",{attrs:{md:"9"}},[n("b-form-input",{attrs:{placeholder:"0x",size:"sm"},model:{value:e.addressToWhitelist,callback:function(t){e.addressToWhitelist=t},expression:"addressToWhitelist"}})],1)],1)],1),n("b-row",{attrs:{"align-h":"end"}},[n("b-col",{attrs:{cols:"12",md:"4",lg:"3"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",size:"sm",disabled:0==e.isAdmin,variant:0==e.isAdmin?"":"success"},on:{click:function(t){return e.senderWhitelistSubmitHandle()}}},[1==e.senderWhitelistLoadSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Set Sender ")],1)],1),n("b-col",{attrs:{cols:"12",md:"4",lg:"3"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",size:"sm",disabled:0==e.isAdmin,variant:0==e.isAdmin?"":"success"},on:{click:function(t){return e.receiverWhitelistSubmitHandle()}}},[1==e.receiverWhitelistLoadSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Set Receiver ")],1)],1),n("b-col",{attrs:{cols:"12",md:"4",lg:"3"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",size:"sm",disabled:0==e.isAdmin,variant:0==e.isAdmin?"":"success"},on:{click:function(t){return e.senderAndReceiverWhitelistSubmitHandle()}}},[1==e.senderAndReceiverWhitelistLoadSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Set Both ")],1)],1)],1)],1)},te=[],ne={name:"whitelistAdd",props:{senderAccount:String,isAdmin:Boolean},data:function(){return{senderWhitelistLoadSpinner:!1,receiverWhitelistLoadSpinner:!1,senderAndReceiverWhitelistLoadSpinner:!1,addressToWhitelist:""}},mounted:function(){},methods:{senderWhitelistSubmitHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c["a"].checkIsAddress(e.addressToWhitelist)){t.next=13;break}return e.senderWhitelistLoadSpinner=!0,t.next=4,c["a"].addToSenderWhiteList(e.addressToWhitelist,e.senderAccount,0);case 4:if(n=t.sent,null==n){t.next=10;break}return t.next=8,c["a"].waitForTxToBeMined(n);case 8:r=t.sent,!0===r&&window.alert("Success to add account to sender whitelist!");case 10:e.senderWhitelistLoadSpinner=!1,t.next=14;break;case 13:alert("Invalid address input!");case 14:case"end":return t.stop()}}),t)})))()},receiverWhitelistSubmitHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c["a"].checkIsAddress(e.addressToWhitelist)){t.next=13;break}return e.receiverWhitelistLoadSpinner=!0,t.next=4,c["a"].addToReceiverWhiteList(e.addressToWhitelist,e.senderAccount,0);case 4:if(n=t.sent,null==n){t.next=10;break}return t.next=8,c["a"].waitForTxToBeMined(n);case 8:r=t.sent,!0===r&&window.alert("Success to add account to receiver whitelist!");case 10:e.receiverWhitelistLoadSpinner=!1,t.next=14;break;case 13:alert("Invalid address input!");case 14:case"end":return t.stop()}}),t)})))()},senderAndReceiverWhitelistSubmitHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c["a"].checkIsAddress(e.addressToWhitelist)){t.next=13;break}return e.senderAndReceiverWhitelistLoadSpinner=!0,t.next=4,c["a"].addToReceiverAndSenderWhiteList(e.addressToWhitelist,e.senderAccount,0);case 4:if(n=t.sent,null==n){t.next=10;break}return t.next=8,c["a"].waitForTxToBeMined(n);case 8:r=t.sent,!0===r&&window.alert("Success to add account to both sender and receiver whitelist");case 10:e.senderAndReceiverWhitelistLoadSpinner=!1,t.next=14;break;case 13:alert("Invalid address input!");case 14:case"end":return t.stop()}}),t)})))()}}},re=ne,se=Object(m["a"])(re,ee,te,!1,null,"0f241fc6",null),ae=se.exports,ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-left"},[n("b-card-text",[n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Address:")]),n("b-col",{attrs:{md:"9"}},[n("b-form-input",{attrs:{placeholder:"0x",size:"sm"},model:{value:e.addressToWhitelist,callback:function(t){e.addressToWhitelist=t},expression:"addressToWhitelist"}})],1)],1)],1),n("b-row",{attrs:{"align-h":"end"}},[n("b-col",{attrs:{cols:"12",md:"4",lg:"3","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",size:"sm",disabled:!1===e.isAdmin,variant:!1===e.isAdmin?"":"success"},on:{click:function(t){return e.senderWhitelistResetHandle()}}},[!0===e.removeSenderLoadSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Remove Sender ")],1)],1),n("b-col",{attrs:{cols:"12",md:"4",lg:"3","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",size:"sm",disabled:!1===e.isAdmin,variant:!1===e.isAdmin?"":"success"},on:{click:function(t){return e.receiverWhitelistResetHandle()}}},[!0===e.removeReceiverLoadSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Remove Receiver ")],1)],1),n("b-col",{attrs:{cols:"12",md:"4",lg:"3","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",size:"sm",disabled:0==e.isAdmin,variant:0==e.isAdmin?"":"success"},on:{click:function(t){return e.senderAndReceiverWhitelistResetHandle()}}},[1==e.removeSenderAndReceiverLoadSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Remove Both ")],1)],1)],1)],1)},ce=[],oe={name:"whitelistRemove",props:{senderAccount:String,isAdmin:Boolean},data:function(){return{removeSenderLoadSpinner:!1,removeReceiverLoadSpinner:!1,removeSenderAndReceiverLoadSpinner:!1,addressToWhitelist:""}},mounted:function(){},methods:{senderWhitelistResetHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c["a"].checkIsAddress(e.addressToWhitelist)){t.next=17;break}return n=null,t.next=4,c["a"].checkPaymentFee().then((function(e){n=parseFloat(e)})).catch((function(e){alert("Error occur!"),console.error(e)}));case 4:return console.log("Default Transaction Fee",n),e.removeSenderLoadSpinner=!0,t.next=8,c["a"].addToSenderWhiteList(e.addressToWhitelist,e.senderAccount,n);case 8:if(r=t.sent,null==r){t.next=14;break}return t.next=12,c["a"].waitForTxToBeMined(r);case 12:s=t.sent,!0===s&&window.alert("Success to remove account from sender whitelist");case 14:e.removeSenderLoadSpinner=!1,t.next=18;break;case 17:alert("Invalid address input!");case 18:case"end":return t.stop()}}),t)})))()},receiverWhitelistResetHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!c["a"].checkIsAddress(e.addressToWhitelist)){t.next=17;break}return n=null,t.next=4,c["a"].checkPaymentFee().then((function(e){n=parseFloat(e)})).catch((function(e){alert("Error occur!"),console.error(e)}));case 4:if(null==n){t.next=15;break}return e.removeReceiverLoadSpinner=!0,t.next=8,c["a"].addToReceiverWhiteList(e.addressToWhitelist,e.senderAccount,n);case 8:if(r=t.sent,null==r){t.next=14;break}return t.next=12,c["a"].waitForTxToBeMined(r);case 12:s=t.sent,!0===s&&window.alert("Success to remove account from receiver whitelist");case 14:e.removeReceiverLoadSpinner=!1;case 15:t.next=18;break;case 17:alert("Invalid address input!");case 18:case"end":return t.stop()}}),t)})))()},senderAndReceiverWhitelistResetHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=null,t.next=3,c["a"].checkPaymentFee().then((function(e){n=parseFloat(e)})).catch((function(e){alert("Error occur!"),console.error(e)}));case 3:if(console.log("txFee",n),null==n){t.next=20;break}if(!c["a"].checkIsAddress(e.addressToWhitelist)){t.next=19;break}return e.removeSenderAndReceiverLoadSpinner=!0,t.next=9,c["a"].addToReceiverAndSenderWhiteList(e.addressToWhitelist,e.senderAccount,n);case 9:if(r=t.sent,console.log(r,"txHash value returned"),null==r){t.next=16;break}return t.next=14,c["a"].waitForTxToBeMined(r);case 14:s=t.sent,!0===s&&window.alert("Success to remvoe account from both sender and receiver whitelist");case 16:e.removeSenderAndReceiverLoadSpinner=!1,t.next=20;break;case 19:alert("Invalid address input!");case 20:case"end":return t.stop()}}),t)})))()}}},le=oe,de=Object(m["a"])(le,ie,ce,!1,null,"74c8546e",null),ue=de.exports,me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-card",{staticClass:"text-center",staticStyle:{"background-color":"rgba(73, 80, 87, 0.5)"},attrs:{header:"Merchant Management","text-variant":"white"}},[n("b-row",{staticClass:"my-2 mx-1 mx-sm-2 text-left"},[n("b-col",{attrs:{md:"3"}},[e._v("Merchant")]),n("b-col",{attrs:{md:"9"}},[n("b-form-input",{attrs:{placeholder:"0x (Address)",size:"sm"},model:{value:e.merchantAddress,callback:function(t){e.merchantAddress=t},expression:"merchantAddress"}})],1)],1),n("b-row",{staticClass:"my-2 mx-1 mx-sm-2",attrs:{"align-h":"end"}},[n("b-col",{attrs:{cols:"6",sm:"3",md:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",disabled:!1===e.isAdmin,variant:!1===e.isAdmin?"":"success",size:"sm"},on:{click:function(t){return e.addMerchant()}}},[1==e.addMerchantSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Add ")],1)],1),n("b-col",{attrs:{cols:"6",sm:"3",md:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-2",attrs:{pill:"",disabled:!1===e.isAdmin,variant:!1===e.isAdmin?"":"success",size:"sm"},on:{click:function(t){return e.removeMerchant()}}},[1==e.removeMerchantSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Remove ")],1)],1)],1)],1)],1)},be=[],ve={name:"merchantAddDrop",props:{senderAccount:String,isAdmin:Boolean},data:function(){return{merchantAddress:"",addMerchantSpinner:!1,removeMerchantSpinner:!1}},methods:{addMerchant:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.merchantAddress,t.next=3,!1===e.validateInput(n);case 3:if(!t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.checkMerchantRegistered(n);case 7:if(r=t.sent,!0!==r){t.next=12;break}window.alert("Merchant already Registered"),t.next=27;break;case 12:if(!1!==r){t.next=25;break}return t.next=15,c["a"].addRemoveMerchant(e.senderAccount,n,!0);case 15:if(s=t.sent,null==s){t.next=23;break}return e.addMerchantSpinner=!0,t.next=20,c["a"].waitForTxToBeMined(s);case 20:a=t.sent,!0===a&&window.alert("Add Merchant Success"),e.addMerchantSpinner=!1;case 23:t.next=27;break;case 25:alert("Error occur in transaction sending"),e.addMerchantSpinner=!1;case 27:case"end":return t.stop()}}),t)})))()},removeMerchant:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.merchantAddress,t.next=3,!1===e.validateInput(n);case 3:if(!t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,e.checkMerchantRegistered(n);case 7:if(r=t.sent,!1!==r){t.next=12;break}window.alert("Input Address is not a merchant address"),t.next=26;break;case 12:if(!0!==r){t.next=25;break}return t.next=15,c["a"].addRemoveMerchant(e.senderAccount,n,!1);case 15:if(s=t.sent,null==s){t.next=23;break}return e.removeMerchantSpinner=!0,t.next=20,c["a"].waitForTxToBeMined(s);case 20:a=t.sent,!0===a&&window.alert("Remove Merchant Success"),e.removeMerchantSpinner=!1;case 23:t.next=26;break;case 25:alert("Error occur in transaction sending");case 26:case"end":return t.stop()}}),t)})))()},checkMerchantRegistered:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].checkMerchantRegistered(e);case 2:return n=t.sent,console.log(n),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})))()},validateInput:function(e){if(!0!==c["a"].checkIsAddress(e))return window.alert("Invalid Address Input!"),!1}}},pe=ve,he=Object(m["a"])(pe,me,be,!1,null,"3e691462",null),fe=he.exports,we={name:"admin",watch:{senderAccount:function(){this.checkIsAdmin()},isAdmin:function(e){console.log("isAdmin triggle: ",this.isAdmin),1==e&&(this.matchingMessage="Account match")}},components:{accountRow:R,transactionFeeSetting:Z,whitelistAdd:ae,whitelistRemove:ue,merchantAddDrop:fe},props:{senderAccount:String},mounted:function(){var e=this;c["a"].CPHTContractAdmin().then((function(t){e.adminAddress=t})).catch((function(e){alert("Error occur!"),console.error(e)}))},data:function(){return{isAdmin:!1,adminAddress:"",matchingMessage:"Account mismatch"}},methods:{checkIsAdmin:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("[admin.vue] sender Account: ",e.senderAccount),t.next=3,c["a"].CPHTContractIsAdmin(e.senderAccount);case 3:e.isAdmin=t.sent,console.log("[admin.vue] is admin: ",e.isAdmin);case 5:case"end":return t.stop()}}),t)})))()}}},Ae=we,ke=(n("b466"),Object(m["a"])(Ae,q,J,!1,null,"4c0777b4",null)),xe=ke.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("b-container",{attrs:{fluid:""}},[n("b-tabs",{attrs:{pills:"",card:""}},[n("b-tab",{attrs:{title:"Referral Fee",active:""}},[n("b-card-text",[n("accountRow",{attrs:{senderAccount:e.senderAccount}}),n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Commission Rate: ")]),n("b-col",{attrs:{md:"7"}},[e._v(" "+e._s(""===e.defaultReferrerCommission?"-":e.defaultReferrerCommission+" %")+" ")])],1),n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Award: ")]),n("b-col",{attrs:{md:"7"}},[e._v(" "+e._s(""===e.oneTimeAward?"-":e.oneTimeAward+" CPHT")+" ")])],1),n("b-row",{staticClass:"my-4 mx-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Commission Period : ")]),n("b-col",{attrs:{md:"7"}},[e._v(" "+e._s(""===e.validPeriod?"-":e.validPeriod+" day(s)")+" ")])],1),n("div",[n("b-card",{staticClass:"text-center",staticStyle:{"background-color":"rgba(33, 37, 41, 0.4)"},attrs:{header:"Referral Award Setting"}},[n("setReferralFee",{attrs:{"sender-account":e.senderAccount}})],1)],1)],1)],1),n("b-tab",{attrs:{title:"Subscription Service"}},[n("b-card-text",[n("div",{staticClass:"my-3"},[n("accountRow",{attrs:{senderAccount:e.senderAccount}}),n("b-card",{staticClass:"text-center",staticStyle:{"background-color":"rgba(33, 37, 41, 0.4)"},attrs:{header:"Create Service For Subscription"}},[n("setSubscriptionService",{attrs:{"sender-account":e.senderAccount}})],1),n("b-card",{staticClass:"text-center mt-4",staticStyle:{"background-color":"rgba(33, 37, 41, 0.4)"},attrs:{header:"Services for Subscription","text-variant":"white"}},[n("service-card",{attrs:{senderAccount:e.senderAccount}})],1)],1)])],1)],1)],1)],1)},ge=[],Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-2; px-md-4; text-left"},[n("b-card-text",{staticClass:"mx-2"},[n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("Referral Fee:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"0 - 60 (%)",type:"number",size:"sm"},model:{value:e.referralFee,callback:function(t){e.referralFee=t},expression:"referralFee"}})],1)],1),n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("One Time Award:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"0 (CPHT)",type:"number",size:"sm"},model:{value:e.oneTimeAward,callback:function(t){e.oneTimeAward=t},expression:"oneTimeAward"}})],1)],1),n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("Valid Period:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"(days)",type:"number",size:"sm"},model:{value:e.validPeriod,callback:function(t){e.validPeriod=t},expression:"validPeriod"}})],1)],1)],1),n("b-row",{staticClass:"justify-content-end"},[n("b-col",{attrs:{md:"3",lg:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-1",attrs:{pill:"",size:"sm",disabled:""===e.senderAccount,variant:""===e.senderAccount?"":"success"},on:{click:function(t){return e.updateCommissionInfoHandle()}}},[!0===e.setCommissionSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Update ")],1)],1)],1)],1)},_e=[],Te={name:"setReferralFee",props:{senderAccount:String},data:function(){return{referralFee:null,oneTimeAward:null,validPeriod:null,setCommissionSpinner:!1}},mounted:function(){},methods:{updateCommissionInfoHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("new ReferralFee",e.referralFee),!(e.referralFee>=0&&e.referralFee<60&&null!=e.oneTimeAward&&null!=e.validPeriod)){t.next=14;break}return e.setCommissionSpinner=!0,t.next=5,c["a"].updateCommissionInfo(e.senderAccount,10*parseFloat(e.referralFee),e.oneTimeAward*Math.pow(10,6),e.validPeriod);case 5:if(n=t.sent,null==n){t.next=10;break}return t.next=9,c["a"].waitForTxToBeMined(n);case 9:r=t.sent;case 10:!0===r?(e.$root.$emit("refreshCommissionData",e.referralFee,e.oneTimeAward,e.validPeriod),e.$root.$emit("successAlert",!0,"Success to set the referral award!")):alert("Failed to set commission info:\n1. The setter must be a registered merchant. \n2. Check your input commission rate is between 0% - 60%"),e.setCommissionSpinner=!1,t.next=15;break;case 14:window.alert("Invalid referral fee input");case 15:case"end":return t.stop()}}),t)})))()}}},ye=Te,Re=Object(m["a"])(ye,Ce,_e,!1,null,"6fbfc889",null),Ie=Re.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-2; px-md-4; text-left"},[n("b-card-text",{staticClass:"mx-2"},[n("b-container",[n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("Service ID:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"0 - 1000",type:"number",size:"sm"},model:{value:e.subscriptionService.id,callback:function(t){e.$set(e.subscriptionService,"id",t)},expression:"subscriptionService.id"}})],1)],1),n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("Service Name:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"Service A",size:"sm"},model:{value:e.subscriptionService.name,callback:function(t){e.$set(e.subscriptionService,"name",t)},expression:"subscriptionService.name"}})],1)],1),n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("Fee:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"(CPHT)",type:"number",size:"sm"},model:{value:e.subscriptionService.fee,callback:function(t){e.$set(e.subscriptionService,"fee",t)},expression:"subscriptionService.fee"}})],1)],1),n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("Charging Period:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"(days)",type:"number",size:"sm"},model:{value:e.subscriptionService.period,callback:function(t){e.$set(e.subscriptionService,"period",t)},expression:"subscriptionService.period"}})],1)],1)],1)],1),n("b-row",{staticClass:"justify-content-end"},[n("b-col",{staticClass:"mx-4",attrs:{md:"3",lg:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-1",attrs:{pill:"",size:"sm",disabled:""===e.senderAccount,variant:""===e.senderAccount?"":"success"},on:{click:function(t){return e.setSubscriptionServiceHandle()}}},[!0===e.setSubscriptionServiceSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Set ")],1)],1)],1)],1)},$e=[],Fe=(n("b0c0"),{name:"setSubscriptionService",props:{senderAccount:String},data:function(){return{subscriptionService:{id:null,name:"",fee:null,period:null},setSubscriptionServiceSpinner:!1}},methods:{setSubscriptionServiceHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e.id&&""!==e.name&&null!==e.fee&&null!==e.period){t.next=3;break}return alert("Invalid Input Value"),t.abrupt("return");case 3:return t.prev=3,e.setSubscriptionServiceSpinner=!0,t.next=7,c["a"].setSubscriptionService(e.senderAccount,e.subscriptionService.id,e.subscriptionService.name,e.subscriptionService.fee*Math.pow(10,6),e.subscriptionService.period);case 7:if(n=t.sent,null==n){t.next=12;break}return t.next=11,c["a"].waitForTxToBeMined(n);case 11:r=t.sent;case 12:console.log(r),!0===r?(e.$root.$emit("successAlert",!0,"Success to set the service!"),setTimeout((function(){e.$root.$emit("updateSubscriptionServices")}),4e3)):e.$root.$emit("failAlert",!0,"Failed to set the service! Check whether the service ID is already in used"),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](3),console.error(t.t0);case 19:return t.prev=19,e.setSubscriptionServiceSpinner=!1,t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[3,16,19,22]])})))()}}}),He=Fe,Me=Object(m["a"])(He,Pe,$e,!1,null,"524f86e3",null),Be=Me.exports,We=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[0===e.subscriptionServices.length?n("p",{staticStyle:{color:"var(--secondary)","font-size":"small"}},[e._v("No Service For Subscription")]):e._e(),n("div",{staticClass:"serviceCardsContainer"},e._l(e.subscriptionServices,(function(t,r){return n("div",{key:r},[n("div",{staticClass:"card"},[n("div",{staticClass:"box"},[n("div",{staticClass:"content"},[n("h2",[e._v(e._s(r+1))]),n("h3",[e._v(e._s(t.serviceName))]),n("div",{staticClass:"overflow-hidden",staticStyle:{"font-size":"xx-small"}},[n("label",[e._v("Service Index:")]),e._v(" "+e._s(t.serviceIndex)+" "),n("br"),n("label",[e._v("Service Fee:")]),e._v(" "+e._s(t.fee)+" "),n("br"),n("label",[e._v("Charging Period:")]),e._v(" "+e._s(t.period)+" "),n("br")]),n("b-button",{staticClass:"my-3",attrs:{block:"",variant:"primary"},on:{click:function(t){return e.hardCodeListener()}}},[e._v("Collect Fee")]),n("b-button",{staticClass:"my-3",attrs:{block:"",variant:"danger"}},[e._v("Delete")])],1)])])])})),0)])},Oe=[],je=n("7e4d"),De=n("7b96"),Ne=n.n(De),Ue=n("4328"),Le=n.n(Ue),Ee={name:"serviceCard",props:{senderAccount:String},mounted:function(){var e=this;this.$root.$on("updateSubscriptionServices",(function(){e.getSubscriptionService()}))},watch:{senderAccount:function(){"undefined"!==typeof this.senderAccount&&!1!==c["a"].checkIsAddress(this.senderAccount)&&this.getSubscriptionService()}},data:function(){return{subscriptionServices:[]}},methods:{getSubscriptionService:function(){var e=this,t={merchant:this.senderAccount};Object(je["a"])("get",Ne.a.backendQueryURL,Ne.a.backendAPI.getSubscriptionServices+"?"+Le.a.stringify(t),null).then((function(t){console.log(t),t.data.data.length>0?e.subscriptionServices=t.data.data:e.subscriptionServices=[]}))},hardCodeListener:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].transfer(e.senderAccount,i["a"].contract.CPHT,e.senderAccount,0);case 2:return t.next=4,c["a"].sleep(5e3);case 4:e.$root.$emit("successAlert",!0,"Success to collect the service fee. 0 customers have been charged for membership extension!");case 5:case"end":return t.stop()}}),t)})))()}}},ze=Ee,Ve=(n("1a2d"),Object(m["a"])(ze,We,Oe,!1,null,"99a06d74",null)),qe=Ve.exports,Je={name:"merchant",components:{accountRow:R,setReferralFee:Ie,setSubscriptionService:Be,serviceCard:qe},props:{senderAccount:String},watch:{senderAccount:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.senderAccount){e.next=5;break}return this.defaultReferrerCommission="",this.oneTimeAward="",this.validPeriod="",e.abrupt("return");case 5:c["a"].checkCommissionInfo(this.senderAccount).then((function(e){t.defaultReferrerCommission=e.commissionRate/10,t.oneTimeAward=e.oneTimeAward/Math.pow(10,6),t.validPeriod=e.validPeriodDay})).catch((function(e){console.error(e)}));case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.$root.$on("refreshCommissionData",(function(t,n,r){e.defaultReferrerCommission=t,e.oneTimeAward=n,e.validPeriod=r}))},data:function(){return{connected:!1,targetAddress:"",amount:null,sendSpinner:!1,defaultReferrerCommission:"",oneTimeAward:"",validPeriod:""}}},Qe=Je,Ge=Object(m["a"])(Qe,Se,ge,!1,null,"263d5a07",null),Ke=Ge.exports,Xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("b-container",{attrs:{fluid:""}},[n("accountRow",{attrs:{senderAccount:e.senderAccount}}),n("b-tabs",{staticClass:"px-2; px-md-5",staticStyle:{"background-color":"rgba(33, 37, 41, 0.4)"},attrs:{pills:"",card:"",align:"right",small:""}},[n("b-tab",{attrs:{title:"Link up",active:""}},[n("b-row",{staticClass:"my-2 "},[n("b-col",{attrs:{md:"3"}},[e._v("Customer:")]),n("b-col",{attrs:{md:"9"}},[n("b-form-input",{attrs:{placeholder:"0x (Address)",size:"sm"},model:{value:e.customerAddressToLink,callback:function(t){e.customerAddressToLink=t},expression:"customerAddressToLink"}})],1)],1),n("b-row",{staticClass:"my-2 "},[n("b-col",{attrs:{md:"3"}},[e._v("Commissioner:")]),n("b-col",{attrs:{md:"9"}},[n("b-form-input",{attrs:{placeholder:"0x (Address)",size:"sm"},model:{value:e.commissionerAddress,callback:function(t){e.commissionerAddress=t},expression:"commissionerAddress"}})],1)],1),n("b-row",{attrs:{"align-h":"end"}},[n("b-col",{staticClass:"mt-3",attrs:{md:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn",attrs:{pill:"",disabled:""==e.senderAccount,variant:""==e.senderAccount?"dark":"success"},on:{click:function(t){return e.submitHandle("Link")}}},[1==e.submitSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Submit ")],1)],1)],1)],1),n("b-tab",{attrs:{title:"Unlink"}},[n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Customer Address:")]),n("b-col",{attrs:{md:"9"}},[n("b-form-input",{attrs:{placeholder:"0x (Address)",size:"sm"},model:{value:e.customerAddressToUnlink,callback:function(t){e.customerAddressToUnlink=t},expression:"customerAddressToUnlink"}})],1)],1),n("b-row",{attrs:{"align-h":"end"}},[n("b-col",{staticClass:"mt-3",attrs:{md:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn",attrs:{pill:"",disabled:""===e.senderAccount,variant:""===e.senderAccount?"dark":"success"},on:{click:function(t){return e.submitHandle("Unlink")}}},[!0===e.submitSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Submit ")],1)],1)],1)],1)],1),n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.commissionerTable",modifiers:{commissionerTable:!0}}],staticClass:"mx-4 mt-5",attrs:{variant:"primary"}},[e._v("View My Commissioners")]),n("b-collapse",{attrs:{id:"commissionerTable",visible:""}},[n("detailHiddenTable",{staticClass:"my-4",attrs:{targetAddress:e.senderAccount,fields:e.customerCommissionerPair.fields,"hidden-fields":e.customerCommissionerPair.hiddenFields,getRecordsAPI:e.customerCommissionerPair.backendConfigAPI.getCommissioners,countRecordsAPI:e.customerCommissionerPair.backendConfigAPI.countCommissioner}})],1)],1)],1)},Ye=[],Ze=n("f3ed"),et={name:"referralCommission",components:{accountRow:R,detailHiddenTable:Ze["a"]},props:{senderAccount:String},data:function(){return{commissionerAddress:"",customerAddressToLink:"",customerAddressToUnlink:"",submitSpinner:"",customerCommissionerPair:{fields:["customer","commissioner","showMore"],hiddenFields:["commissionRate","validPeriod","oneTimeAward","tx_hash","block_signed_at","block_height"],backendConfigAPI:Ne.a.backendAPI}}},methods:{submitHandle:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.dataValidation(e),!r){n.next=21;break}if(t.submitSpinner=!0,"Link"!==e){n.next=9;break}return n.next=6,c["a"].customerCommissionerMapping(t.senderAccount,t.customerAddressToLink,t.commissionerAddress);case 6:s=n.sent,n.next=13;break;case 9:if("Unlink"!==e){n.next=13;break}return n.next=12,c["a"].customerCommissionerRemoving(t.senderAccount,t.customerAddressToUnlink);case 12:s=n.sent;case 13:if(null==s){n.next=18;break}return n.next=16,c["a"].waitForTxToBeMined(s);case 16:i=n.sent,!0!==i?t.$root.$emit("failAlert",!0,"Check that default referral commission rate has set!"):(t.$root.$emit("successAlert",!0,"Success to update customer commissioner pair list!"),c["a"].sleep(5e3).then(Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.senderAccount,t.senderAccount="",e.next=4,c["a"].sleep(200);case 4:t.senderAccount=n;case 5:case"end":return e.stop()}}),e)})))));case 18:t.submitSpinner=!1,n.next=22;break;case 21:t.$root.$emit("failAlert",!0,"Invalid address input");case 22:case"end":return n.stop()}}),n)})))()},dataValidation:function(e){return"Link"===e?c["a"].checkIsAddress(this.commissionerAddress)&&c["a"].checkIsAddress(this.customerAddressToLink):"Unlink"===e?c["a"].checkIsAddress(this.customerAddressToUnlink):void 0}}},tt=et,nt=Object(m["a"])(tt,Xe,Ye,!1,null,"32ef4e54",null),rt=nt.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("br"),n("b-container",{attrs:{fluid:""}},[n("accountRow",{attrs:{"sender-account":e.senderAccount,"token-name":"CPHT"}}),n("b-card",{staticClass:"text-center",staticStyle:{"background-color":"rgba(33, 37, 41, 0.4)"},attrs:{header:"Subscribe"}},[n("subscribe",{attrs:{senderAccount:e.senderAccount}})],1),n("b-card",{staticClass:"text-center mt-4",staticStyle:{"background-color":"rgba(33, 37, 41, 0.4)"},attrs:{header:"Subscribed Service","text-variant":"white"}},[n("mySubscription",{attrs:{senderAccount:e.senderAccount}})],1)],1)],1)},at=[],it=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-2; px-md-4; text-left"},[n("b-card-text",{staticClass:"mx-2"},[n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("Service Provider:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"0x (address)",size:"sm"},model:{value:e.serviceProvider,callback:function(t){e.serviceProvider=t},expression:"serviceProvider"}})],1)],1),n("b-row",{staticClass:"my-2"},[n("b-col",{attrs:{md:"4",lg:"3"}},[e._v("Service ID:")]),n("b-col",{attrs:{md:"8",lg:"9"}},[n("b-form-input",{attrs:{placeholder:"0",type:"number",size:"sm"},model:{value:e.serviceID,callback:function(t){e.serviceID=t},expression:"serviceID"}})],1)],1)],1),n("b-row",{staticClass:"justify-content-end"},[n("b-col",{staticClass:"mx-2",attrs:{md:"3",lg:"2","align-self":"end"}},[n("b-button",{staticClass:"submitBtn my-1",attrs:{size:"sm",disabled:""===e.senderAccount,variant:""===e.senderAccount?"":"info"},on:{click:function(t){return e.getServiceInfoHandle()}}},[e._v(" Show Service "),n("b-icon",{attrs:{icon:"arrow-down-circle",scale:"1",variant:"light"}})],1)],1)],1),null!==e.serviceInfo?n("div",{staticClass:"mt-3"},[n("b-card",{staticClass:"card bg-dark border-dark text-light"},[null!==e.serviceInfo&&!0===e.serviceInfo.isSet?n("div",[n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Service Name:")]),n("b-col",{attrs:{md:"9"}},[e._v(e._s(e.serviceInfo.serviceName))])],1),n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Service Fee:")]),n("b-col",{attrs:{md:"9"}},[e._v(e._s(e.serviceInfo.serviceFee+" CPHT"))])],1),n("b-row",{staticClass:"mb-2"},[n("b-col",{attrs:{md:"3"}},[e._v("Charging Period:")]),n("b-col",{attrs:{md:"9"}},[e._v(e._s(e.serviceInfo.period+" days"))])],1),n("b-row",[n("b-button",{staticClass:"mt-1 mx-2",attrs:{variant:"primary",size:"sm"},on:{click:function(t){return e.subscribeHandle()}}},[!0===e.subscribeSpinner?n("b-spinner",{attrs:{small:""}}):e._e(),e._v(" Subscribe ")],1)],1)],1):e._e(),null!==e.serviceInfo&&!1===e.serviceInfo.isSet?n("div",{staticClass:"my-0",staticStyle:{display:"flex","justify-content":"center"}},[n("p",{staticStyle:{color:"var(--secondary)","font-size":"medium","text-align":"center"}},[e._v("Service Not Existed")])]):e._e()])],1):e._e()],1)},ct=[],ot={name:"subscribe",props:{senderAccount:String},data:function(){return{serviceProvider:"",serviceID:null,serviceInfo:null,subscribeSpinner:!1}},mounted:function(){console.log()},methods:{getServiceInfoHandle:function(){var e=this;""!==this.serviceProvider&&c["a"].checkIsAddress(this.serviceProvider)&&this.serviceID>=0?c["a"].getSubscriptionServiceInfo(this.serviceProvider,this.serviceID).then((function(t){e.serviceInfo=t,e.serviceInfo.serviceFee=e.serviceInfo.serviceFee/Math.pow(10,6)})):this.$root.$emit("failAlert",!0,"Invalid Input")},subscribeHandle:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(""!==e.serviceProvider&&c["a"].checkIsAddress(e.serviceProvider)&&e.serviceID>=0)){t.next=13;break}return t.next=3,c["a"].subscribe(e.senderAccount,e.serviceProvider,e.serviceID);case 3:if(n=t.sent,e.subscribeSpinner=!0,null==n){t.next=9;break}return t.next=8,c["a"].waitForTxToBeMined(n);case 8:r=t.sent;case 9:!0===r?e.$emit("successAlert",!0,"Success to Subscribe To "+e.serviceInfo.serviceName):e.$root.$emit("failAlert",!0,"Check Whether The Service Is Already Be Subscribed"),e.subscribeSpinner=!1,t.next=14;break;case 13:e.$root.$emit("failAlert",!0,"Invalid Input");case 14:case"end":return t.stop()}}),t)})))()}}},lt=ot,dt=Object(m["a"])(lt,it,ct,!1,null,"174eaaf9",null),ut=dt.exports,mt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[0===e.subscribedServices.length?n("p",{staticStyle:{color:"var(--secondary)","font-size":"small"}},[e._v("Subscribed Services")]):e._e(),n("div",{staticClass:"serviceCardsContainer"},e._l(e.subscribedServices,(function(t,r){return n("div",{key:r},[n("div",{staticClass:"card"},[n("div",{staticClass:"box"},[n("div",{staticClass:"content"},[n("h2",[e._v(e._s(r+1))]),n("div",{staticClass:"overflow-hidden",staticStyle:{"font-size":"xx-small"}},[n("lable",[e._v("Service Provider:")]),e._v(" "+e._s(t.serviceProvider)+" "),n("br"),n("lable",[e._v("Service ID:")]),e._v(" "+e._s(t.serviceIndex)+" "),n("br"),n("lable",[e._v("Charing Price:")]),e._v(" "+e._s(t.price)+" "),n("br"),n("lable",[e._v("Subscription TIme:")]),e._v(" "+e._s(t.subscriptionTime)+" "),n("br"),n("lable",[e._v("Expiration Time:")]),e._v(" "+e._s(t.expirationTime)+" ")],1),n("b-button",{staticClass:"my-3",attrs:{block:"",variant:"danger"},on:{click:function(t){return e.hardCodeListener()}}},[e._v("Terminate")])],1)])])])})),0)])},bt=[],vt={name:"mySubscription",props:{senderAccount:String},mounted:function(){var e=this;this.$root.$on("updateSubscribedServices",(function(){e.getSubscribedService()}))},watch:{senderAccount:function(){"undefined"!==typeof this.senderAccount&&!1!==c["a"].checkIsAddress(this.senderAccount)&&this.getSubscribedService()}},data:function(){return{subscribedServices:[]}},methods:{getSubscribedService:function(){var e=this,t={user:this.senderAccount};Object(je["a"])("get",Ne.a.backendQueryURL,Ne.a.backendAPI.getUserSubscriptions+"?"+Le.a.stringify(t),null).then((function(t){console.log(t),t.data.data.length>0?e.subscribedServices=t.data.data:e.subscribedServices=[]}))},hardCodeListener:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].transfer(e.senderAccount,i["a"].contract.CPHT,e.senderAccount,0);case 2:return t.next=4,c["a"].sleep(5e3);case 4:return e.$root.$emit("successAlert",!0,"Success to cancel the subscribed service!"),t.next=7,c["a"].sleep(2e3);case 7:e.subscribedServices=[];case 8:case"end":return t.stop()}}),t)})))()}}},pt=vt,ht=(n("2501"),Object(m["a"])(pt,mt,bt,!1,null,"ae464ada",null)),ft=ht.exports,wt={name:"subscriptionService",components:{accountRow:R,subscribe:ut,mySubscription:ft},props:{senderAccount:String}},At=wt,kt=Object(m["a"])(At,st,at,!1,null,"62435f65",null),xt=kt.exports,St={name:"ConnectBoxContainer",components:{alert:v,depositWithdrawal:F,tokenRegister:D,c2bPayment:V,admin:xe,merchant:Ke,referralCommission:rt,subscriptionService:xt},props:{service:String},data:function(){return{senderAccount:"",network:"",show:!1,showNetworkConectionErrorAlert:!1,connected:!1,ethereumInit:!1}},methods:{init:function(){var e=this;window.ethereum.on("accountsChanged",(function(t){"undefined"!==typeof t[0]?(e.senderAccount=t[0],e.ethereumInit=!0):(e.senderAccount="",e.ethereumInit=!1,e.connected=!1)})),window.ethereum.on("chainChanged",(function(t){t==i["a"].chainID?(e.show=!1,e.showNetworkConectionErrorAlert=!1,e.connected=!0):(e.show=!0,e.showNetworkConectionErrorAlert=!0,e.connected=!1)}))},onClickConnectBtn:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null==window.ethereum){t.next=12;break}return t.next=3,c["a"].blockchainConnection();case 3:return!1===e.ethereumInit&&(console.log("init"),e.init()),window.ethereum.chainId!=i["a"].chainID&&(console.log("Wrong network, please connect to Mumbai-Testnet network"),e.show=!0,e.showNetworkConectionErrorAlert=!0),t.next=7,window.ethereum.request({method:"eth_requestAccounts"});case 7:n=t.sent,e.senderAccount=n[0],!0===c["a"].checkIsAddress(e.senderAccount)&&(e.connected=!0),t.next=14;break;case 12:return window.alert("Metamask not been detected. Please installed or activated it at google plugin"),t.abrupt("return");case 14:console.log("Web3 for Platform Permissioned Chain initialized successfully");case 15:case"end":return t.stop()}}),t)})))()}}},gt=St,Ct=(n("b733"),Object(m["a"])(gt,r,s,!1,null,"c3558682",null));t["default"]=Ct.exports},dc85:function(e,t,n){}}]);
//# sourceMappingURL=chunk-623a184b.674c5666.js.map